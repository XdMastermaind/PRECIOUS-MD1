function _0x181b() {
  const _0xcc487 = ['trace', 'oEoFn', "mage file ", 'XBxVF', 'oiZZb', 'vFIQa', "rom images", 'RUabJ', 'from', "emove bg f", 'startsWith', "ot return ", 'whqPj', "rmat. Plea", 'SjlWz', 'BJUim', 'i.popcat.x', 'OORjR', 'oCrCT', 'Unsupporte', 'dWtzq', 'Facgl', '{}.constru', 'ror', "G or PNG", "ly to an i", 'ycRlE', 'search', 'zyLLs', 'download', 'append', 'length', 'image/', 'fileToUplo', 'includes', 'md*', '35BDeNhi', '35870cjMVcW', 'pattern', 'chat', "return (fu", 'AGxGb', 'warn', 'NnFiE', 'Vwoak', 'message', 'toString', 'pjQsF', 'yz/v2/ad?i', 'SuBBl', 'njieT', 'RfUMS', 'mimetype', 'prototype', 'Stream', '206358xQGLTe', 'image/jpeg', 'rAEnV', 'imgscan_', "Error: The", "0 Bytes", "gain later", 'htVWB', 'binary', "Failed to ", 'fileupload', '172hBruTe', 'sendMessag', 'alias', 'Bytes', "An error o", '.png', 'bfjwG', 'image', 'createRead', 'now', 'writeFileS', 'RPabg', ".ad [reply", 'arraybuffe', 'yadHb', 'zVSHQ', 'img_edit', "Scan and r", '(((.+)+)+)', 'CkWPE', "age. Try a", "Please rep", 'reqtype', '171qnDcpm', 'bind', "Unknown er", 'data', 'https://ca', 'form-data', 'ujtrS', 'info', 'bbQkN', "se use JPE", "rn this\")(", 'quoted', 'msg', 'oxieq', 'emanT', 'path', '6203901dtOPYf', 'tbox.moe/u', 'constructo', 'vBuTp', "ctor(\"retu", 'lVEky', 'NeOfX', 'https://ap', " API did n", 'console', 'axios', 'category', '76290XkYxjJ', '.jpg', 'exception', '__proto__', '241864yqkDbe', 'image/png', '16735ZuMhUX', 'egEYr', "Ad Error:", " to image]", "ge to Catb", 'response', 'oeQPo', '247400miaRZn', 'apply', 'zpHID', 'post', 'unlinkSync', 'use', 'getHeaders', 'ser/api.ph', 'join', 'mpEIa', "d image fo", "a valid im", 'XgkEh', '3UakCcE', 'filename', 'mage='];
  _0x181b = function () {
    return _0xcc487;
  };
  return _0x181b();
}
(function (_0x44ef87, _0x1bfc52) {
  const _0x3fed56 = _0x44ef87();
  while (true) {
    try {
      const _0x2a5e30 = -parseInt(_0x2b7f(252, 0x3ac)) / 1 + parseInt(_0x2b7f(168, -0x28d)) / 2 * (-parseInt(_0x2b7f(128, -0x321)) / 3) + parseInt(_0x2b7f(197, 0x364)) / 4 * (parseInt(_0x2b7f(254, -0x25f)) / 5) + -parseInt(_0x2b7f(186, 0x35a)) / 6 * (parseInt(_0x2b7f(167, 0x378)) / 7) + parseInt(_0x2b7f(115, 0x34f)) / 8 + parseInt(_0x2b7f(220, -0x2d0)) / 9 * (-parseInt(_0x2b7f(248, 0x3da)) / 10) + parseInt(_0x2b7f(236, -0x269)) / 11;
      if (_0x2a5e30 === _0x1bfc52) {
        break;
      } else {
        _0x3fed56.push(_0x3fed56.shift());
      }
    } catch (_0x520f5d) {
      _0x3fed56.push(_0x3fed56.shift());
    }
  }
})(_0x181b, 162122);
const _0x33ed14 = function () {
  let _0x3eafa1 = true;
  return function (_0x1e591a, _0x48f9e7) {
    const _0x166bfc = _0x3eafa1 ? function () {
      if (_0x48f9e7) {
        const _0x521de8 = _0x48f9e7.apply(_0x1e591a, arguments);
        _0x48f9e7 = null;
        return _0x521de8;
      }
    } : function () {};
    _0x3eafa1 = false;
    return _0x166bfc;
  };
}();
const _0x4d8666 = _0x33ed14(this, function () {
  return _0x4d8666.toString().search("(((.+)+)+)+$").toString().constructor(_0x4d8666).search("(((.+)+)+)+$");
});
_0x4d8666();
function _0x2b7f(_0x448562, _0x360feb) {
  const _0x4d8666 = _0x181b();
  _0x2b7f = function (_0x33ed14, _0x181ba6) {
    _0x33ed14 = _0x33ed14 - 110;
    let _0x2b7f07 = _0x4d8666[_0x33ed14];
    return _0x2b7f07;
  };
  return _0x2b7f(_0x448562, _0x360feb);
}
const _0x5cffc6 = function () {
  let _0x4b0a9d = true;
  return function (_0x4b0634, _0x36becf) {
    const _0x46bd2b = _0x4b0a9d ? function () {
      if (_0x36becf) {
        const _0x462ff3 = _0x36becf.apply(_0x4b0634, arguments);
        _0x36becf = null;
        return _0x462ff3;
      }
    } : function () {};
    _0x4b0a9d = false;
    return _0x46bd2b;
  };
}();
const _0x2c60ae = _0x5cffc6(this, function () {
  const _0x1a293f = function () {
    let _0x29e1f5;
    try {
      _0x29e1f5 = Function("return (function() {}.constructor(\"return this\")( ));")();
    } catch (_0x1ae321) {
      _0x29e1f5 = window;
    }
    return _0x29e1f5;
  };
  const _0x212063 = _0x1a293f();
  const _0x5c9d3d = _0x212063.console = _0x212063.console || {};
  const _0x1280d2 = ['log', "warn", "info", 'error', "exception", 'table', "trace"];
  for (let _0x3ef2df = 0; _0x3ef2df < _0x1280d2.length; _0x3ef2df++) {
    const _0xbdf3a8 = _0x5cffc6.constructor.prototype.bind(_0x5cffc6);
    const _0x274f0f = _0x1280d2[_0x3ef2df];
    const _0x4daa95 = _0x5c9d3d[_0x274f0f] || _0xbdf3a8;
    _0xbdf3a8.__proto__ = _0x5cffc6.bind(_0x5cffc6);
    _0xbdf3a8.toString = _0x4daa95.toString.bind(_0x4daa95);
    _0x5c9d3d[_0x274f0f] = _0xbdf3a8;
  }
});
_0x2c60ae();
const axios = require("axios");
const FormData = require("form-data");
const fs = require('fs');
const os = require('os');
const path = require("path");
const {
  cmd
} = require('../command');
function _0x49c124(_0x186e3e, _0x45e342, _0x479d58, _0x17a34c) {
  return _0x2b7f(_0x186e3e - 0x260, _0x45e342);
}
function formatBytes(_0x42642d) {
  if (_0x42642d === 0) {
    return "0 Bytes";
  }
  const _0x576158 = ["Bytes", 'KB', 'MB', 'GB'];
  const _0x220f82 = Math.floor(Math.log(_0x42642d) / Math.log(1024));
  return parseFloat((_0x42642d / Math.pow(1024, _0x220f82)).toFixed(2)) + " " + _0x576158[_0x220f82];
}
const _0x11018c = {
  pattern: 'ade',
  alias: ['adedit']
};
function _0x294ae7(_0x4d18fd, _0x401f03, _0x62535d, _0x42f6a8) {
  return _0x2b7f(_0x42f6a8 + 0xff, _0x62535d);
}
_0x11018c.react = 'ğŸ“¸';
_0x11018c.desc = "Scan and remove bg from images";
_0x11018c.category = "img_edit";
_0x11018c.use = ".ad [reply to image]";
_0x11018c.filename = __filename;
cmd(_0x11018c, async (_0x4c2ee9, _0x95783f, _0x59f8e7, {
  reply: _0x4fb1e5,
  mek: _0x527bd7
}) => {
  try {
    const _0x263738 = _0x95783f.quoted ? _0x95783f.quoted : _0x95783f;
    const _0x3e9034 = (_0x263738.msg || _0x263738).mimetype || '';
    if (!_0x3e9034 || !_0x3e9034.startsWith("image/")) {
      return _0x4fb1e5("Please reply to an image file (JPEG/PNG)");
    }
    const _0x10193e = await _0x263738.download();
    let _0x53a59e = '';
    if (_0x3e9034.includes("image/jpeg")) {
      _0x53a59e = ".jpg";
    } else {
      if (_0x3e9034.includes("image/png")) {
        _0x53a59e = ".png";
      } else {
        return _0x4fb1e5("Unsupported image format. Please use JPEG or PNG");
      }
    }
    const _0x1998fb = path.join(os.tmpdir(), "imgscan_" + Date.now() + _0x53a59e);
    fs.writeFileSync(_0x1998fb, _0x10193e);
    const _0x373553 = new FormData();
    _0x373553.append("fileToUpload", fs.createReadStream(_0x1998fb), 'image' + _0x53a59e);
    _0x373553.append("reqtype", "fileupload");
    const _0x189644 = await axios.post("https://catbox.moe/user/api.php", _0x373553, {
      'headers': _0x373553.getHeaders()
    });
    const _0xa89f39 = _0x189644.data;
    fs.unlinkSync(_0x1998fb);
    if (!_0xa89f39) {
      throw "Failed to upload image to Catbox";
    }
    const _0x7d55da = "https://api.popcat.xyz/v2/ad?image=" + encodeURIComponent(_0xa89f39);
    const _0x133e3a = {
      responseType: "arraybuffer"
    };
    const _0x1e7ddc = await axios.get(_0x7d55da, _0x133e3a);
    if (!_0x1e7ddc || !_0x1e7ddc.data) {
      return _0x4fb1e5("Error: The API did not return a valid image. Try again later.");
    }
    const _0x21ffbb = Buffer.from(_0x1e7ddc.data, "binary");
    const _0x31328a = {
      image: _0x21ffbb,
      caption: "> *Â© ğğ¨ğ°ğğ«ğ ğğ² ğğ«ğğœğ¢ğ¨ğ®ğ¬-ğŒğ*"
    };
    await _0x4c2ee9.sendMessage(_0x59f8e7.chat, _0x31328a);
  } catch (_0x8870ca) {
    console.error("Ad Error:", _0x8870ca);
    _0x4fb1e5("An error occurred: " + (_0x8870ca.response?.["data"]?.['message'] || _0x8870ca.message || "Unknown error"));
  }
});