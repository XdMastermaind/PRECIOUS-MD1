(function (_0x4eb743, _0x25ea87) {
  const _0x25a3b6 = _0x4eb743();
  while (true) {
    try {
      const _0x5368f3 = -parseInt(_0x42ab(340, 0x396)) / 1 * (-parseInt(_0x42ab(364, 0x243)) / 2) + parseInt(_0x42ab(412, 0x20f)) / 3 * (-parseInt(_0x42ab(359, 0x3b8)) / 4) + -parseInt(_0x42ab(330, 0x1ae)) / 5 + -parseInt(_0x42ab(354, 0x1fa)) / 6 * (-parseInt(_0x42ab(386, 0x23b)) / 7) + parseInt(_0x42ab(404, 0x364)) / 8 + parseInt(_0x42ab(301, 0x174)) / 9 + parseInt(_0x42ab(358, 0x1b3)) / 10 * (-parseInt(_0x42ab(422, 0x245)) / 11);
      if (_0x5368f3 === _0x25ea87) {
        break;
      } else {
        _0x25a3b6.push(_0x25a3b6.shift());
      }
    } catch (_0x3a7e85) {
      _0x25a3b6.push(_0x25a3b6.shift());
    }
  }
})(_0x8647, 191079);
const _0x3e1746 = function () {
  let _0x6ad0bd = true;
  return function (_0x55af8e, _0xcaa177) {
    const _0x1ce716 = _0x6ad0bd ? function () {
      if (_0xcaa177) {
        const _0x2e86b7 = _0xcaa177.apply(_0x55af8e, arguments);
        _0xcaa177 = null;
        return _0x2e86b7;
      }
    } : function () {};
    _0x6ad0bd = false;
    return _0x1ce716;
  };
}();
function _0x176249(_0x3ea03a, _0x303d30, _0x3b4c11, _0x2fbe0c) {
  return _0x42ab(_0x2fbe0c - 0x347, _0x3ea03a);
}
const _0x10c233 = _0x3e1746(this, function () {
  return _0x10c233.toString().search("(((.+)+)+)+$").toString().constructor(_0x10c233).search("(((.+)+)+)+$");
});
_0x10c233();
function _0x42ab(_0x10c233, _0x3e1746) {
  const _0x864783 = _0x8647();
  _0x42ab = function (_0x42ab6b, _0x4f61ff) {
    _0x42ab6b = _0x42ab6b - 280;
    let _0xbc6ff2 = _0x864783[_0x42ab6b];
    return _0xbc6ff2;
  };
  return _0x42ab(_0x10c233, _0x3e1746);
}
const _0x440bc9 = function () {
  let _0x836e1f = true;
  return function (_0x5cdefa, _0x19a596) {
    const _0x587b18 = _0x836e1f ? function () {
      if (_0x19a596) {
        const _0x454fba = _0x19a596.apply(_0x5cdefa, arguments);
        _0x19a596 = null;
        return _0x454fba;
      }
    } : function () {};
    _0x836e1f = false;
    return _0x587b18;
  };
}();
const _0x3afdb0 = _0x440bc9(this, function () {
  const _0x4cec2d = function () {
    let _0x1eb924;
    try {
      _0x1eb924 = Function("return (function() {}.constructor(\"return this\")( ));")();
    } catch (_0x51437f) {
      _0x1eb924 = window;
    }
    return _0x1eb924;
  };
  const _0x266625 = _0x4cec2d();
  const _0x55a3f5 = _0x266625.console = _0x266625.console || {};
  const _0x3f2d21 = ["log", "warn", "info", 'error', 'exception', 'table', "trace"];
  for (let _0xadc3a3 = 0; _0xadc3a3 < _0x3f2d21.length; _0xadc3a3++) {
    const _0x2d5842 = _0x440bc9.constructor.prototype.bind(_0x440bc9);
    const _0x4b4fab = _0x3f2d21[_0xadc3a3];
    const _0x41c836 = _0x55a3f5[_0x4b4fab] || _0x2d5842;
    _0x2d5842.__proto__ = _0x440bc9.bind(_0x440bc9);
    _0x2d5842.toString = _0x41c836.toString.bind(_0x41c836);
    _0x55a3f5[_0x4b4fab] = _0x2d5842;
  }
});
function _0x8647() {
  const _0x5de868 = ['joPtz', 'unOAD', "ge to Catb", '1859427gPbjzi', 'nqsGD', "ccurred: ", "ly to imag", 'rHdjI', 'log', '(((.+)+)+)', 'eSXpC', 'axios', "rn this\")(", "0 Bytes", 'react', 'gXndb', 'Unsupporte', 'RyzPv', 'raHvQ', ".blur [rep", "Unknown er", 'tmpdir', 'pattern', '../command', "return (fu", 'trace', "ot return ", 'gaYgb', 'oHKHq', 'data', 'includes', "Ñ”âˆ‚ Ğ²Ñƒ precious ", '270590kyDwaG', "Error: The", 'hsnDy', '__proto__', 'mimetype', 'bYmLc', '.jpg', 'console', "Scan and r", 'tbox.moe/u', '185137pMQZCx', "a valid im", 'mcFYj', 'responseTy', 'aowsp', "Blur Error", 'pow', 'bluredit', 'yz/v2/blur', 'category', 'mgYAo', "Please rep", "ly to an i", 'https://ap', '18882NbXyvd', "upload ima", 'YCGJI', 'Wpfcy', '5475290ivHxmD', '703544LWZakM', 'writeFileS', 'floor', 'wdmHf', 'IZLQk', '4JlnSnY', "rmat. Plea", 'get', 'from', "nction() ", 'SSOzN', 'FZOoU', '{}.constru', 'error', 'chat', 'image/png', 'message', 'alias', 'image/', "gain later", 'bGmEq', 'msg', 'image', 'warn', 'img_edit', 'toString', 'apply', '357lVzMaC', 'bind', 'reqtype', "ctor(\"retu", 'image/jpeg', 'VtjJq', 'fileToUplo', 'md*', 'length', 'form-data', 'response', 'download', 'Bytes', 'kOaHj', 'binary', 'path', 'vvDDl', 'append', '1849904CVMYef', 'ZjPeQ', 'startsWith', 'arraybuffe', 'olpQL', 'getHeaders', "G or PNG", 'ync', '3yxFnGQ', "> *Â© á´˜ÏƒÏ‰Ñ”Ê€", 'createRead', 'mXOep', 'unlinkSync', 'imgscan_', 'YZthK', 'info', 'pTNiv', 'join', '11uXuDXf', 'prototype', 'search', "Failed to ", 'DQPOF', "rom images", 'caption', 'XkNlJ', 'dxuQc', 'constructo', 'post', '.png', "mage file ", 'igUFn', 'toFixed', 'ror', 'quoted', '?image=', "emove bg f", "An error o", "se use JPE", "age. Try a"];
  _0x8647 = function () {
    return _0x5de868;
  };
  return _0x8647();
}
_0x3afdb0();
const axios = require("axios");
const FormData = require("form-data");
const fs = require('fs');
const os = require('os');
const path = require("path");
const {
  cmd
} = require("../command");
function formatBytes(_0x2c240d) {
  if (_0x2c240d === 0) {
    return "0 Bytes";
  }
  const _0x48fd15 = ["Bytes", 'KB', 'MB', 'GB'];
  const _0x4682ff = Math.floor(Math.log(_0x2c240d) / Math.log(1024));
  return parseFloat((_0x2c240d / Math.pow(1024, _0x4682ff)).toFixed(2)) + " " + _0x48fd15[_0x4682ff];
}
const _0x3fcb38 = {
  pattern: 'blur',
  alias: ["bluredit"],
  react: 'ğŸ“¸',
  desc: "Scan and remove bg from images"
};
function _0x524bf3(_0x4d775f, _0x1cb6f6, _0x5e04c9, _0x511fc6) {
  return _0x42ab(_0x5e04c9 + 0x152, _0x511fc6);
}
_0x3fcb38.category = "img_edit";
_0x3fcb38.use = ".blur [reply to image]";
_0x3fcb38.filename = __filename;
cmd(_0x3fcb38, async (_0x12945a, _0x402896, _0x486539, {
  reply: _0x4799ad,
  mek: _0x3c8cac
}) => {
  try {
    const _0x1b0876 = _0x402896.quoted ? _0x402896.quoted : _0x402896;
    const _0x2a5166 = (_0x1b0876.msg || _0x1b0876).mimetype || '';
    if (!_0x2a5166 || !_0x2a5166.startsWith("image/")) {
      return _0x4799ad("Please reply to an image file (JPEG/PNG)");
    }
    const _0x5c4308 = await _0x1b0876.download();
    let _0x20db2b = '';
    if (_0x2a5166.includes("image/jpeg")) {
      _0x20db2b = ".jpg";
    } else {
      if (_0x2a5166.includes("image/png")) {
        _0x20db2b = ".png";
      } else {
        return _0x4799ad("Unsupported image format. Please use JPEG or PNG");
      }
    }
    const _0x585806 = path.join(os.tmpdir(), "imgscan_" + Date.now() + _0x20db2b);
    fs.writeFileSync(_0x585806, _0x5c4308);
    const _0x537a9e = new FormData();
    _0x537a9e.append("fileToUpload", fs.createReadStream(_0x585806), "image" + _0x20db2b);
    _0x537a9e.append("reqtype", 'fileupload');
    const _0x5bde73 = await axios.post("https://catbox.moe/user/api.php", _0x537a9e, {
      'headers': _0x537a9e.getHeaders()
    });
    const _0x3380de = _0x5bde73.data;
    fs.unlinkSync(_0x585806);
    if (!_0x3380de) {
      throw "Failed to upload image to Catbox";
    }
    const _0x390261 = "https://api.popcat.xyz/v2/blur?image=" + encodeURIComponent(_0x3380de);
    const _0x38b28b = {
      responseType: "arraybuffer"
    };
    const _0x4fdea8 = await axios.get(_0x390261, _0x38b28b);
    if (!_0x4fdea8 || !_0x4fdea8.data) {
      return _0x4799ad("Error: The API did not return a valid image. Try again later.");
    }
    const _0x447aa1 = Buffer.from(_0x4fdea8.data, "binary");
    const _0x51596b = {
      image: _0x447aa1,
      caption: "> *Â© ğğ¨ğ°ğğ«ğ ğğ² ğğ«ğğœğ¢ğ¨ğ®ğ¬-ğŒğ*"
    };
    await _0x12945a.sendMessage(_0x486539.chat, _0x51596b);
  } catch (_0x54b8a3) {
    console.error("Blur Error:", _0x54b8a3);
    _0x4799ad("An error occurred: " + (_0x54b8a3.response?.['data']?.["message"] || _0x54b8a3.message || "Unknown error"));
  }
});