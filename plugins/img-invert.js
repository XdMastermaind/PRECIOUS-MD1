(function (_0x49d809, _0x16b23d) {
  const _0x123767 = _0x49d809();
  while (true) {
    try {
      const _0x1bfa26 = -parseInt(_0x3f3e(401, 0xd1)) / 1 + parseInt(_0x3f3e(339, -0x3b)) / 2 * (parseInt(_0x3f3e(348, 0x62)) / 3) + -parseInt(_0x3f3e(429, 0x1a)) / 4 * (parseInt(_0x3f3e(328, 0xb)) / 5) + parseInt(_0x3f3e(343, 0x90)) / 6 * (parseInt(_0x3f3e(391, 0xcb)) / 7) + parseInt(_0x3f3e(336, 0x1)) / 8 + parseInt(_0x3f3e(383, -0x1e)) / 9 + -parseInt(_0x3f3e(443, 0x6f)) / 10;
      if (_0x1bfa26 === _0x16b23d) {
        break;
      } else {
        _0x123767.push(_0x123767.shift());
      }
    } catch (_0x45a5eb) {
      _0x123767.push(_0x123767.shift());
    }
  }
})(_0x5c34, 751884);
function _0x3f3e(_0x276952, _0x2b9bf8) {
  const _0x2bc573 = _0x5c34();
  _0x3f3e = function (_0x5c349f, _0x3f3e20) {
    _0x5c349f = _0x5c349f - 307;
    let _0x38ad72 = _0x2bc573[_0x5c349f];
    return _0x38ad72;
  };
  return _0x3f3e(_0x276952, _0x2b9bf8);
}
const _0x2bc573 = function () {
  let _0x2a0b2a = true;
  return function (_0x8c0542, _0x453983) {
    const _0x37b653 = _0x2a0b2a ? function () {
      if (_0x453983) {
        const _0x2ad2eb = _0x453983.apply(_0x8c0542, arguments);
        _0x453983 = null;
        return _0x2ad2eb;
      }
    } : function () {};
    _0x2a0b2a = false;
    return _0x37b653;
  };
}();
function _0x5c34() {
  const _0xd57f27 = ['console', 'filename', 'yz/v2/inve', 'bpEOu', 'bttMQ', '(JPEG/PNG)', 'mGFlm', 'img_edit', 'download', 'sznjI', 'RVxXw', 'SYQNN', 'axios', 'post', '2121966ypkQbh', "Ñ”âˆ‚ Ğ²Ñƒ Î±â„“Î¹ ", 'use', '__proto__', 'PPSNp', 'desc', 'ylGVq', 'now', '3696HVLRsV', 'imgscan_', 'CkXsX', "Unknown er", "Scan and r", '.png', '{}.constru', "Please rep", "G or PNG", 'tYkez', '388211ZOLrqQ', 'category', 'form-data', 'QlbOE', 'DGzLZ', 'info', 'iKNyO', "upload ima", "rom images", 'tuhYQ', 'oywJb', 'path', 'mimetype', 'czpCX', 'bind', 'WhIou', 'hRXtZ', '../command', "nction() ", 'startsWith', 'Bytes', 'Gqdxg', 'iyhrN', "0 Bytes", 'length', 'createRead', 'omTbW', 'log', '950596RnedlN', "rmat. Plea", 'XEZbl', 'hmdAP', 'LlRvw', 'ror', 'UNQLh', 'data', 'prototype', "ge to Catb", 'rt?image=', 'age]', 'Kfczr', 'react', '784320PkLKCc', 'MZLRU', "Invert Err", 'kBkUn', 'constructo', 'image/jpeg', 'ETnZK', 'WypIQ', 'asfOb', ".invert [r", "rn this\")(", "ly to an i", 'https://ap', '(((.+)+)+)', 'binary', "se use JPE", 'invert', 'jtUQA', 'Stream', "return (fu", 'search', 'includes', 'alias', "Failed to ", 'image', "ot return ", 'exception', 'apply', 'rmtid', 'response', 'aegRc', "age. Try a", 'tbox.moe/u', 'sendMessag', 'quoted', 'ser/api.ph', 'Ltrzs', 'tFtdX', 'nPrlC', '15NUHTnV', 'nVAjr', "mage file ", 'get', 'https://ca', 'image/png', 'Unsupporte', 'XglFj', '10030672YDUuvf', 'WPgug', "a valid im", '2876kAFdmL', " API did n", 'gljxY', 'sKOpK', '1704RIhois', '.jpg', "eply to im", 'deDqC', 'tJAya', '609JmSKKq', 'toString', 'QplEu', "Error: The", 'error', "ctor(\"retu", 'gBxXH', 'Ğ¼âˆ‚â¯ê¯­Ì½ğŸ*', 'ync', 'getHeaders', 'append', 'ysrmn', 'invertedit', 'RrVKz', 'trace', 'IPskK', 'FJYPJ', 'bHhCg', 'pow', 'fileToUplo', "ccurred: "];
  _0x5c34 = function () {
    return _0xd57f27;
  };
  return _0x5c34();
}
function _0x13d1bc(_0x3e62b7, _0x1274a6, _0x343cfd, _0x3b0b08) {
  return _0x3f3e(_0x3b0b08 + 0x7, _0x1274a6);
}
const _0x2b9bf8 = _0x2bc573(this, function () {
  return _0x2b9bf8.toString().search("(((.+)+)+)+$").toString().constructor(_0x2b9bf8).search("(((.+)+)+)+$");
});
_0x2b9bf8();
function _0x59ac1c(_0x10c057, _0x16fabb, _0x217d42, _0x353401) {
  return _0x3f3e(_0x10c057 + 0x3ab, _0x353401);
}
const _0x3d55bb = function () {
  const _0x99cfc7 = {
    iKNyO: function (_0x35d608, _0x558099) {
      return _0x35d608 !== _0x558099;
    }
  };
  _0x99cfc7.bHhCg = 'EwgII';
  _0x99cfc7.UNQLh = "XEZbl";
  _0x99cfc7.gBxXH = "(((.+)+)+)+$";
  let _0x47f753 = true;
  return function (_0x40e724, _0x3f447e) {
    const _0x2cac26 = {
      XglFj: _0x99cfc7.gBxXH
    };
    const _0x1971ac = _0x47f753 ? function () {
      if (_0x99cfc7.bHhCg !== _0x99cfc7.UNQLh) {
        if (_0x3f447e) {
          const _0xc6c6d4 = _0x3f447e.apply(_0x40e724, arguments);
          _0x3f447e = null;
          return _0xc6c6d4;
        }
      } else {
        return _0x1c8a63.toString().search(_0x2cac26.XglFj).toString().constructor(_0x356b7b).search(_0x2cac26.XglFj);
      }
    } : function () {};
    _0x47f753 = false;
    return _0x1971ac;
  };
}();
const _0x12c2b0 = _0x3d55bb(this, function () {
  let _0xb199a9;
  try {
    const _0x3312a6 = Function("return (function() {}.constructor(\"return this\")( ));");
    _0xb199a9 = _0x3312a6();
  } catch (_0x41cb7c) {
    _0xb199a9 = window;
  }
  const _0xfa21c5 = _0xb199a9.console = _0xb199a9.console || {};
  const _0x15f5ba = ["log", 'warn', "info", "error", "exception", 'table', "trace"];
  for (let _0x579273 = 0; _0x579273 < _0x15f5ba.length; _0x579273++) {
    const _0x272372 = _0x3d55bb.constructor.prototype.bind(_0x3d55bb);
    const _0x164f4b = _0x15f5ba[_0x579273];
    const _0x17fcd7 = _0xfa21c5[_0x164f4b] || _0x272372;
    _0x272372.__proto__ = _0x3d55bb.bind(_0x3d55bb);
    _0x272372.toString = _0x17fcd7.toString.bind(_0x17fcd7);
    _0xfa21c5[_0x164f4b] = _0x272372;
  }
});
_0x12c2b0();
const axios = require("axios");
const FormData = require("form-data");
const fs = require('fs');
const os = require('os');
const path = require("path");
const {
  cmd
} = require("../command");
function formatBytes(_0x5413ef) {
  if (_0x5413ef === 0) {
    return "0 Bytes";
  }
  const _0x393396 = ["Bytes", 'KB', 'MB', 'GB'];
  const _0x31e964 = Math.floor(Math.log(_0x5413ef) / Math.log(1024));
  return parseFloat((_0x5413ef / Math.pow(1024, _0x31e964)).toFixed(2)) + " " + _0x393396[_0x31e964];
}
const _0x43c58f = {
  pattern: "invert",
  alias: ["invertedit"],
  react: 'ğŸ“¸',
  desc: "Scan and remove bg from images",
  category: "img_edit",
  use: ".invert [reply to image]",
  filename: __filename
};
cmd(_0x43c58f, async (_0x1c5fcc, _0x2266b9, _0x30f99b, {
  reply: _0x188978,
  mek: _0x21b337
}) => {
  try {
    const _0xff5cc2 = _0x2266b9.quoted ? _0x2266b9.quoted : _0x2266b9;
    const _0x1ff77d = (_0xff5cc2.msg || _0xff5cc2).mimetype || '';
    if (!_0x1ff77d || !_0x1ff77d.startsWith('image/')) {
      return _0x188978("Please reply to an image file (JPEG/PNG)");
    }
    const _0x3a54b8 = await _0xff5cc2.download();
    let _0x4b65a2 = '';
    if (_0x1ff77d.includes("image/jpeg")) {
      _0x4b65a2 = ".jpg";
    } else {
      if (_0x1ff77d.includes("image/png")) {
        _0x4b65a2 = ".png";
      } else {
        return _0x188978("Unsupported image format. Please use JPEG or PNG");
      }
    }
    const _0x4816f = path.join(os.tmpdir(), "imgscan_" + Date.now() + _0x4b65a2);
    fs.writeFileSync(_0x4816f, _0x3a54b8);
    const _0x11bdaa = new FormData();
    _0x11bdaa.append("fileToUpload", fs.createReadStream(_0x4816f), "image" + _0x4b65a2);
    _0x11bdaa.append('reqtype', 'fileupload');
    const _0x45acff = await axios.post("https://catbox.moe/user/api.php", _0x11bdaa, {
      'headers': _0x11bdaa.getHeaders()
    });
    const _0x7d3d5d = _0x45acff.data;
    fs.unlinkSync(_0x4816f);
    if (!_0x7d3d5d) {
      throw "Failed to upload image to Catbox";
    }
    const _0x1673f3 = "https://api.popcat.xyz/v2/invert?image=" + encodeURIComponent(_0x7d3d5d);
    const _0x327663 = {
      responseType: "arraybuffer"
    };
    const _0x195670 = await axios.get(_0x1673f3, _0x327663);
    if (!_0x195670 || !_0x195670.data) {
      return _0x188978("Error: The API did not return a valid image. Try again later.");
    }
    const _0x21a2a6 = Buffer.from(_0x195670.data, "binary");
    const _0x3cedf8 = {
      image: _0x21a2a6,
      caption: "> *Â© ğğ¨ğ°ğğ«ğ ğğ² ğğ«ğğœğ¢ğ¨ğ®ğ¬-ğŒğ*"
    };
    await _0x1c5fcc.sendMessage(_0x30f99b.chat, _0x3cedf8);
  } catch (_0x2da824) {
    console.error("Invert Error:", _0x2da824);
    _0x188978("An error occurred: " + (_0x2da824.response?.['data']?.['message'] || _0x2da824.message || "Unknown error"));
  }
});