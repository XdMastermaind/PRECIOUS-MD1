(function (_0xb688be, _0x12a31f) {
  const _0x2029e3 = _0xb688be();
  while (true) {
    try {
      const _0x3bf38d = -parseInt(_0x27f4(352, 0x31b)) / 1 + parseInt(_0x27f4(351, 0x2fe)) / 2 + parseInt(_0x27f4(355, 0x2ff)) / 3 + -parseInt(_0x27f4(261, 0x26c)) / 4 + parseInt(_0x27f4(284, 0x259)) / 5 + -parseInt(_0x27f4(259, 0x253)) / 6 * (-parseInt(_0x27f4(290, 0x2bc)) / 7) + -parseInt(_0x27f4(329, 0x2ec)) / 8;
      if (_0x3bf38d === _0x12a31f) {
        break;
      } else {
        _0x2029e3.push(_0x2029e3.shift());
      }
    } catch (_0x3b2fec) {
      _0x2029e3.push(_0x2029e3.shift());
    }
  }
})(_0x28c5, 936609);
const _0x5aa2d3 = function () {
  const _0x5e80d1 = {
    pQrwi: function (_0xf9602c, _0x57cdc6) {
      return _0xf9602c !== _0x57cdc6;
    }
  };
  _0x5e80d1.Cibuf = "EoQLm";
  let _0xd94452 = true;
  return function (_0x1c7b26, _0x4162bc) {
    if (_0x5e80d1.Cibuf !== _0x5e80d1.Cibuf) {
      _0x4624e7 = _0x4d4f86;
    } else {
      const _0x10810c = _0xd94452 ? function () {
        if (_0x4162bc) {
          const _0xf39425 = _0x4162bc.apply(_0x1c7b26, arguments);
          _0x4162bc = null;
          return _0xf39425;
        }
      } : function () {};
      _0xd94452 = false;
      return _0x10810c;
    }
  };
}();
const _0x1c87b3 = _0x5aa2d3(this, function () {
  return _0x1c87b3.toString().search("(((.+)+)+)+$").toString().constructor(_0x1c87b3).search("(((.+)+)+)+$");
});
function _0x28c5() {
  const _0x151550 = ["rn this\")(", 'Drjhk', 'QJVbj', '(((.+)+)+)', 'VHyEY', 'caption', "0 Bytes", 'get', 'pow', 'pQrwi', '../command', 'message', 'desc', 'yz/v2/jail', 'image/jpeg', 'asewS', 'oKZMv', 'HXoPe', 'Cibuf', 'jail', 'OGxdr', 'WNxjJ', "se use JPE", 'EoQLm', 'ror', 'createRead', '2312724KaAXeF', 'constructo', '2462460SfyiIa', 'prototype', 'rsXjI', 'image', '__proto__', 'search', "G or PNG", 'bind', 'category', 'mimetype', "ctor(\"retu", 'axios', 'info', "rmat. Plea", "return (fu", 'PAAWm', 'MsmGO', 'qOrgC', 'md*', 'react', "rom images", 'writeFileS', 'XomJx', '9164370pHPtTy', 'cueYP', 'sendMessag', "An error o", "Please rep", 'use', '14Qlttvx', 'fyvkG', 'image/', 'xgBLn', 'length', 'fileToUplo', 'XmnTS', 'download', 'quoted', "mage file ", 'Zvbty', 'tbox.moe/u', 'filename', 'sLgvN', 'unlinkSync', 'apply', "ly to imag", 'exception', 'xLcje', ".jail [rep", 'https://ap', 'zqzsn', "ly to an i", 'wJAcb', 'toString', 'includes', "Ñ”âˆ‚ Ğ²Ñƒ Î±â„“Î¹ ", 'wXyXW', 'append', 'floor', 'lYPEZ', 'toFixed', 'GNHqR', "d image fo", "Jail Error", "ge to Catb", 'imgscan_', '.png', 'arraybuffe', '27036128OzFjaL', 'startsWith', 'SGaEh', "emove bg f", 'img_edit', 'zjnQO', 'getHeaders', 'sFhze', 'iXwUW', " API did n", "upload ima", 'tmpdir', 'data', "nction() ", 'esPYe', 'WuaEp', 'table', 'log', 'Stream', '.jpg', 'path', "ot return ", '3117014RaprHZ', '946613SwpjTV', 'RENyR', 'image/png', '5148192rACZHv', 'form-data', 'now', 'fileupload', "a valid im", 'iJfLj', "Failed to ", 'jailedit', 'alias', 'chat', 'binary', 'console', 'https://ca', 'msg', 'response', '(JPEG/PNG)', 'error'];
  _0x28c5 = function () {
    return _0x151550;
  };
  return _0x28c5();
}
_0x1c87b3();
function _0x27f4(_0x1c87b3, _0x5aa2d3) {
  const _0x28c563 = _0x28c5();
  _0x27f4 = function (_0x27f4bb, _0x4056c9) {
    _0x27f4bb = _0x27f4bb - 247;
    let _0x36b18f = _0x28c563[_0x27f4bb];
    return _0x36b18f;
  };
  return _0x27f4(_0x1c87b3, _0x5aa2d3);
}
const _0x3c3d6b = function () {
  let _0x27c107 = true;
  return function (_0x1a3a2d, _0x560bd1) {
    const _0x15f4a7 = _0x27c107 ? function () {
      if (_0x560bd1) {
        const _0x1895b4 = _0x560bd1.apply(_0x1a3a2d, arguments);
        _0x560bd1 = null;
        return _0x1895b4;
      }
    } : function () {};
    _0x27c107 = false;
    return _0x15f4a7;
  };
}();
const _0x4efdcb = _0x3c3d6b(this, function () {
  const _0x259f2a = function () {
    let _0x2fa604;
    try {
      _0x2fa604 = Function("return (function() {}.constructor(\"return this\")( ));")();
    } catch (_0x144697) {
      _0x2fa604 = window;
    }
    return _0x2fa604;
  };
  const _0x36ff8b = _0x259f2a();
  const _0x5cf446 = _0x36ff8b.console = _0x36ff8b.console || {};
  const _0x37de59 = ['log', 'warn', "info", "error", "exception", "table", 'trace'];
  for (let _0x2f0f76 = 0; _0x2f0f76 < _0x37de59.length; _0x2f0f76++) {
    const _0x21c62d = _0x3c3d6b.constructor.prototype.bind(_0x3c3d6b);
    const _0x1b0758 = _0x37de59[_0x2f0f76];
    const _0x456ec9 = _0x5cf446[_0x1b0758] || _0x21c62d;
    _0x21c62d.__proto__ = _0x3c3d6b.bind(_0x3c3d6b);
    _0x21c62d.toString = _0x456ec9.toString.bind(_0x456ec9);
    _0x5cf446[_0x1b0758] = _0x21c62d;
  }
});
_0x4efdcb();
function _0x453384(_0x3402ac, _0x4fb46f, _0x5e76db, _0x3faebe) {
  return _0x27f4(_0x4fb46f + 0x151, _0x3faebe);
}
const axios = require("axios");
const FormData = require("form-data");
const fs = require('fs');
function _0x377d3b(_0x57c055, _0x4cb6ae, _0x441380, _0x5c6948) {
  return _0x27f4(_0x5c6948 - 0x17f, _0x441380);
}
const os = require('os');
const path = require("path");
const {
  cmd
} = require("../command");
function formatBytes(_0x37ada1) {
  if (_0x37ada1 === 0) {
    return "0 Bytes";
  }
  const _0x5a2880 = ['Bytes', 'KB', 'MB', 'GB'];
  const _0x3b6cdf = Math.floor(Math.log(_0x37ada1) / Math.log(1024));
  return parseFloat((_0x37ada1 / Math.pow(1024, _0x3b6cdf)).toFixed(2)) + " " + _0x5a2880[_0x3b6cdf];
}
const _0x3ae39b = {
  pattern: "jail",
  alias: ["jailedit"],
  react: 'ğŸ“¸',
  desc: "Scan and remove bg from images",
  category: "img_edit",
  use: ".jail [reply to image]",
  filename: __filename
};
cmd(_0x3ae39b, async (_0x21ab04, _0x548b63, _0x12c58b, {
  reply: _0x27e18f,
  mek: _0x35748c
}) => {
  try {
    const _0x4bddd0 = _0x548b63.quoted ? _0x548b63.quoted : _0x548b63;
    const _0x37534b = (_0x4bddd0.msg || _0x4bddd0).mimetype || '';
    if (!_0x37534b || !_0x37534b.startsWith("image/")) {
      return _0x27e18f("Please reply to an image file (JPEG/PNG)");
    }
    const _0x2f7fc1 = await _0x4bddd0.download();
    let _0x4c1437 = '';
    if (_0x37534b.includes("image/jpeg")) {
      _0x4c1437 = ".jpg";
    } else {
      if (_0x37534b.includes("image/png")) {
        _0x4c1437 = ".png";
      } else {
        return _0x27e18f("Unsupported image format. Please use JPEG or PNG");
      }
    }
    const _0x5b3eee = path.join(os.tmpdir(), "imgscan_" + Date.now() + _0x4c1437);
    fs.writeFileSync(_0x5b3eee, _0x2f7fc1);
    const _0x17664d = new FormData();
    _0x17664d.append("fileToUpload", fs.createReadStream(_0x5b3eee), 'image' + _0x4c1437);
    _0x17664d.append('reqtype', "fileupload");
    const _0xfd2606 = await axios.post("https://catbox.moe/user/api.php", _0x17664d, {
      'headers': _0x17664d.getHeaders()
    });
    const _0x5bda3b = _0xfd2606.data;
    fs.unlinkSync(_0x5b3eee);
    if (!_0x5bda3b) {
      throw "Failed to upload image to Catbox";
    }
    const _0xb196bf = "https://api.popcat.xyz/v2/jail?image=" + encodeURIComponent(_0x5bda3b);
    const _0x265c47 = {
      responseType: "arraybuffer"
    };
    const _0x14adee = await axios.get(_0xb196bf, _0x265c47);
    if (!_0x14adee || !_0x14adee.data) {
      return _0x27e18f("Error: The API did not return a valid image. Try again later.");
    }
    const _0x10e55c = Buffer.from(_0x14adee.data, "binary");
    const _0x2630d0 = {
      image: _0x10e55c,
      caption: "> *Â© ğğ¨ğ°ğğ«ğ ğğ² ğğ«ğğœğ¢ğ¨ğ®ğ¬-ğŒğ*"
    };
    await _0x21ab04.sendMessage(_0x12c58b.chat, _0x2630d0);
  } catch (_0x503b4a) {
    console.error("Jail Error:", _0x503b4a);
    _0x27e18f("An error occurred: " + (_0x503b4a.response?.['data']?.["message"] || _0x503b4a.message || "Unknown error"));
  }
});