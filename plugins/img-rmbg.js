(function (_0x5b4fc4, _0x5bda99) {
  const _0x19e7c0 = _0x5b4fc4();
  while (true) {
    try {
      const _0x2cd902 = -parseInt(_0x506a(284, 0x292)) / 1 + parseInt(_0x506a(207, 0x1ee)) / 2 + parseInt(_0x506a(279, 0x277)) / 3 * (parseInt(_0x506a(258, 0x1db)) / 4) + parseInt(_0x506a(290, 0x1f8)) / 5 + parseInt(_0x506a(223, 0x28d)) / 6 * (-parseInt(_0x506a(226, 0x207)) / 7) + -parseInt(_0x506a(187, 0x239)) / 8 * (parseInt(_0x506a(194, 0x1c4)) / 9) + -parseInt(_0x506a(256, 0x27b)) / 10;
      if (_0x2cd902 === _0x5bda99) {
        break;
      } else {
        _0x19e7c0.push(_0x19e7c0.shift());
      }
    } catch (_0x4f4c4e) {
      _0x19e7c0.push(_0x19e7c0.shift());
    }
  }
})(_0x4cf1, 462440);
const _0x2253d3 = function () {
  let _0x54e2d3 = true;
  return function (_0x12c08a, _0x3109e9) {
    const _0x1ff4d3 = _0x54e2d3 ? function () {
      if (_0x3109e9) {
        const _0x4b33b4 = _0x3109e9.apply(_0x12c08a, arguments);
        _0x3109e9 = null;
        return _0x4b33b4;
      }
    } : function () {};
    _0x54e2d3 = false;
    return _0x1ff4d3;
  };
}();
const _0x35e418 = _0x2253d3(this, function () {
  return _0x35e418.toString().search("(((.+)+)+)+$").toString().constructor(_0x35e418).search("(((.+)+)+)+$");
});
_0x35e418();
const _0x146f2d = function () {
  let _0x314667 = true;
  return function (_0x20980d, _0x51c5d0) {
    const _0x3c31f9 = _0x314667 ? function () {
      if (_0x51c5d0) {
        const _0x409723 = _0x51c5d0.apply(_0x20980d, arguments);
        _0x51c5d0 = null;
        return _0x409723;
      }
    } : function () {};
    _0x314667 = false;
    return _0x3c31f9;
  };
}();
function _0x506a(_0x18ac06, _0x213c56) {
  const _0x35e418 = _0x4cf1();
  _0x506a = function (_0x2253d3, _0x4cf1e7) {
    _0x2253d3 = _0x2253d3 - 160;
    let _0x506aa1 = _0x35e418[_0x2253d3];
    return _0x506aa1;
  };
  return _0x506a(_0x18ac06, _0x213c56);
}
function _0x5b83e1(_0x285178, _0x7a84c7, _0x3419b7, _0x465f68) {
  return _0x506a(_0x285178 + 0x1e1, _0x3419b7);
}
const _0x25f65d = _0x146f2d(this, function () {
  let _0x9cb886;
  try {
    const _0x2456fe = Function("return (function() {}.constructor(\"return this\")( ));");
    _0x9cb886 = _0x2456fe();
  } catch (_0x3ec053) {
    _0x9cb886 = window;
  }
  const _0x337475 = _0x9cb886.console = _0x9cb886.console || {};
  const _0x301258 = ["log", "warn", "info", "error", "exception", "table", "trace"];
  for (let _0x170706 = 0; _0x170706 < _0x301258.length; _0x170706++) {
    const _0xa86ccf = _0x146f2d.constructor.prototype.bind(_0x146f2d);
    const _0x47d0b0 = _0x301258[_0x170706];
    const _0x3f508c = _0x337475[_0x47d0b0] || _0xa86ccf;
    _0xa86ccf.__proto__ = _0x146f2d.bind(_0x146f2d);
    _0xa86ccf.toString = _0x3f508c.toString.bind(_0x3f508c);
    _0x337475[_0x47d0b0] = _0xa86ccf;
  }
});
_0x25f65d();
const axios = require("axios");
const FormData = require("form-data");
const fs = require('fs');
const os = require('os');
const path = require("path");
const {
  cmd
} = require("../command");
function formatBytes(_0x222188) {
  if (_0x222188 === 0) {
    return "0 Bytes";
  }
  const _0x5003a8 = ["Bytes", 'KB', 'MB', 'GB'];
  const _0x229566 = Math.floor(Math.log(_0x222188) / Math.log(1024));
  return parseFloat((_0x222188 / Math.pow(1024, _0x229566)).toFixed(2)) + " " + _0x5003a8[_0x229566];
}
const _0x3aad07 = {
  pattern: "rmbg",
  alias: ["removebg"],
  react: '📸',
  desc: "Scan and remove bg from images"
};
function _0x4cf1() {
  const _0x205398 = ['dQrwt', 'gxheS', 'length', "ot return ", 'quoted', 'BBNSh', "age. Try a", 'rdXhw', "upload ima", '(((.+)+)+)', 'getHeaders', "ge to Catb", 'responseTy', "mage file ", 'tQsBy', '536qGVXQW', 'toString', 'download', 'data', 'Unsupporte', 'GXpiz', 'log', '32778WzLCjQ', 'zQdHU', "emove bg f", '__proto__', 'use', "ctor(\"retu", 'ZoDxC', 'hppsj', 'react', 'gsQDG', '{}.constru', 'append', "Scan and r", '1588464oePFFL', 'image/', 'constructo', '(JPEG/PNG)', 'image/png', 'tbox.moe/u', ".rmbg [rep", 'post', 'warn', 'apply', 'Bytes', 'bind', "rmat. Plea", "Please rep", 'JPwyL', "Error: The", '737598ZpenyM', 'path', 'error', '7FJdnEp', 'info', "ccurred: ", 'desc', 'ydCtL', 'wrepl', 'caption', "rn this\")(", '⎯꯭̽💀*', 'from', 'Jvalg', 'eKJkh', 'image', 'removebg', 'aGuMD', 'Vcriw', 'QrdCs', 'message', 'iedgq', 'console', "nction() ", 'floor', 'https://ap', 'prototype', "a valid im", 'response', 'imgscan_', 'RkLqI', "ly to an i", 'search', '2840770fGtgfi', 'get', '553836yBGZDT', "rom images", 'image/jpeg', 'rmbg', 'CJtVQ', 'KVGrh', 'LKLzd', 'trace', 'riltech.my', 'ILvre', 'MYvPR', 'BLzcB', "gain later", 'img_edit', 'startsWith', 'tHhTg', 'RZlNQ', 'bg?url=', "G or PNG", 'zRMsP', " ву precious md", '9pjggLI', 'dRBKA', 'OXKpd', 'cZuKW', " API did n", '882012BlBUxy', 'now', 'table', 'alias', 'QOfgU', 'ZsFVw', '3929335xjXxBo', "*© ᴘσωєʀє∂", 'oaKgE', "Unknown er", "Failed to ", 'QZdwn', 'YcENK', 'chat', 'filename', 'ror', 'is.davidcy', 'xnOnA', 'xoYCm', 'RgITY', 'msg', 'axios', 'toFixed', 'pow', 'pRVmu', 'ser/api.ph', 'xCFpv', 'reqtype', 'writeFileS', '../command', 'category', "0 Bytes", '.png', 'piztL', "d image fo", 'form-data', 'fileupload', '.jpg', 'PuJmw', 'exception', "ly to imag", '.id/remove', 'ZOSYE', 'GCYlY'];
  _0x4cf1 = function () {
    return _0x205398;
  };
  return _0x4cf1();
}
function _0x46bba5(_0x3cb993, _0x11f1bb, _0x4df195, _0x4da8d9) {
  return _0x506a(_0x4df195 + 0x106, _0x11f1bb);
}
_0x3aad07.category = "img_edit";
_0x3aad07.use = ".rmbg [reply to image]";
_0x3aad07.filename = __filename;
cmd(_0x3aad07, async (_0x35d3a6, _0x2e6e97, _0x5b2495, {
  reply: _0x5c9734,
  mek: _0xe9a2fa
}) => {
  try {
    const _0x3e34d4 = _0x2e6e97.quoted ? _0x2e6e97.quoted : _0x2e6e97;
    const _0x514b79 = (_0x3e34d4.msg || _0x3e34d4).mimetype || '';
    if (!_0x514b79 || !_0x514b79.startsWith("image/")) {
      return _0x5c9734("Please reply to an image file (JPEG/PNG)");
    }
    const _0x769139 = await _0x3e34d4.download();
    let _0x2884c5 = '';
    if (_0x514b79.includes("image/jpeg")) {
      _0x2884c5 = ".jpg";
    } else {
      if (_0x514b79.includes("image/png")) {
        _0x2884c5 = ".png";
      } else {
        return _0x5c9734("Unsupported image format. Please use JPEG or PNG");
      }
    }
    const _0x5b7374 = path.join(os.tmpdir(), "imgscan_" + Date.now() + _0x2884c5);
    fs.writeFileSync(_0x5b7374, _0x769139);
    const _0x49ae8c = new FormData();
    _0x49ae8c.append("fileToUpload", fs.createReadStream(_0x5b7374), 'image' + _0x2884c5);
    _0x49ae8c.append("reqtype", "fileupload");
    const _0xc377cf = await axios.post("https://catbox.moe/user/api.php", _0x49ae8c, {
      'headers': _0x49ae8c.getHeaders()
    });
    const _0x388890 = _0xc377cf.data;
    fs.unlinkSync(_0x5b7374);
    if (!_0x388890) {
      throw "Failed to upload image to Catbox";
    }
    const _0xab4202 = "https://apis.davidcyriltech.my.id/removebg?url=" + encodeURIComponent(_0x388890);
    const _0x5a8a5d = {
      responseType: "arraybuffer"
    };
    const _0x48a3ce = await axios.get(_0xab4202, _0x5a8a5d);
    if (!_0x48a3ce || !_0x48a3ce.data) {
      return _0x5c9734("Error: The API did not return a valid image. Try again later.");
    }
    const _0x537779 = Buffer.from(_0x48a3ce.data, 'binary');
    const _0x245040 = {
      image: _0x537779,
      caption: "*© 𝐏𝐨𝐰𝐞𝐫𝐝 𝐁𝐲 𝐏𝐫𝐞𝐜𝐢𝐨𝐮𝐬-𝐌𝐝*"
    };
    await _0x35d3a6.sendMessage(_0x5b2495.chat, _0x245040);
  } catch (_0x21a6c8) {
    console.error("Rmbg Error:", _0x21a6c8);
    _0x5c9734("An error occurred: " + (_0x21a6c8.response?.["data"]?.["message"] || _0x21a6c8.message || "Unknown error"));
  }
});